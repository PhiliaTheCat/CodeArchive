#ifndef __INCLUDED_BUBBLE_SORT__
    #define __INCLUDED_BUBBLE_SORT__

    #include "Iterator_Traits"

    namespace ptc
    {
        template<class RandomIterator, class Cmpfunc> void Bubble_Sort(RandomIterator begin, RandomIterator end, Cmpfunc cmp);

        template<class RandomIterator, class Cmpfunc> void Bubble_Sort(RandomIterator begin, RandomIterator end, Cmpfunc cmp)
        {
            typedef typename Iterator_Traits<RandomIterator>::value_type value_type;
            
            bool flag = true;
            for (RandomIterator j = end; j > begin && flag; j -= 1)
            {
                flag = false;
                for (RandomIterator i = begin; i < j - 1; i += 1)
                {
                    if (cmp(*(i + 1), *i))
                    {
                        flag = true;
                        value_type temp = *i;
                        *i = *(i + 1);
                        *(i + 1) = temp;
                    }
                }
            }
        }
    }
#endif
